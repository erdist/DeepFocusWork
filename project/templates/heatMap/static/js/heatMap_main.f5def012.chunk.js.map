{"version":3,"sources":["components/fs.webp","components/rectangle.js","components/tools.js","components/kanvas.js","components/kanvasOfShowOnMap.js","ShowOnMap.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","Component","Tools","state","uploading","images","fileInput","React","createRef","onChange","e","target","files","length","changeImage","props","setState","URL","createObjectURL","then","image","imageUpload","current","click","this","showImageHandler","selectedTool","selectTool","saveShape","Menu","icon","style","border","Item","backgroundColor","color","name","content","onClick","faRaspberryPi","handleUndo","handleClear","Icon","type","id","ref","hidden","PureComponent","Canvas","drawShapes","a","async","layer","shapes","showImage","destroyChildren","Konva","Image","fromURL","add","zIndex","draw","s","Line","points","shape","stroke","fill","closed","draggable","Rect","Ring","Path","scaleX","scaleY","undefined","xxx","findOne","destroy","point","line","circleDrawHandler","ring","x","evt","layerX","y","layerY","outerRadius","innerRadius","strokeWidth","setAttrs","circle","console","log","attrs","Math","sqrt","pow","rectangleDrawHandler","width","rectangle","height","polygonDrawHandler","polygon","raspberryDrawHandler","data","raspBerry","mouseMoveHandler","oldTarget","mouseUpHandler","isReadyToSaveHaveHandler","changeShape","_id","tr","Transformer","attachTo","on","parent","push","addCircle","stage","Stage","window","innerWidth","innerHeight","container","visible","Layer","raspberryPath","CanvasOfShowOnMap","count","imageURL","i","j","lenOfId","filter","d","deviceID","opacity","JSON","parse","document","getElementById","dataset","value","parseInt","imageurl","setInterval","ShowOnMap","ReactDOM","render","Boolean","location","hostname","match","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.f5def012.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/fs.d9b552ea.webp\";","import {Rect, Transformer} from \"react-konva\";\nimport React, {Component,createRef} from \"react\";\n\nexport class Rectangle extends Component{\n    componentDidMount() {\n        const { isSelected } = this.props;\n        if (isSelected) {\n            this.trRef.current.setNode(this.shapeRef.current);\n            this.trRef.current.getLayer().batchDraw();\n        }\n    }\n\n    render(){\n        const { shapeProps, isSelected, onSelect, onChange } = this.props;\n        this.shapeRef = createRef();\n        this.trRef = createRef();\n        console.log(\"shapeRef\",this.shapeRef)\n        console.log(\"trRef\",this.trRef)\n        return <React.Fragment>\n            <Rect\n                onClick={onSelect}\n                ref={this.shapeRef}\n                {...shapeProps}\n                draggable\n                onDragEnd={e => {\n                    onChange({\n                        ...shapeProps,\n                        x: e.target.x(),\n                        y: e.target.y()\n                    });\n                }}\n                onTransformEnd={e => {\n                    // transformer is changing scale of the node\n                    // and NOT its width or height\n                    // but in the store we have only width and height\n                    // to match the data better we will reset scale on transform end\n                    const node = this.shapeRef.current;\n                    const scaleX = node.scaleX();\n                    const scaleY = node.scaleY();\n\n                    // we will reset it back\n                    node.scaleX(1);\n                    node.scaleY(1);\n                    onChange({\n                        ...shapeProps,\n                        x: node.x(),\n                        y: node.y(),\n                        // set minimal value\n                        width: Math.max(5, node.width() * scaleX),\n                        height: Math.max(node.height() * scaleY)\n                    });\n                }}\n            />\n            {isSelected && <Transformer ref={this.trRef} />}\n        </React.Fragment>\n    }\n}\n","import React, {PureComponent} from \"react\";\nimport {Menu, Icon} from \"semantic-ui-react\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faRaspberryPi } from '@fortawesome/free-brands-svg-icons'\n\nexport class Tools extends PureComponent{\n    state = {\n        uploading: false,\n        images: true\n    };\n    fileInput = React.createRef();\n\n    onChange = e => {\n        if(e.target.files.length===1) {\n            const {changeImage} = this.props;\n            this.setState({uploading: true});\n            changeImage(URL.createObjectURL(e.target.files[0])).then(image => {\n                this.setState({uploading: false, image})\n            });\n        }\n\n        // Send it to back end to keep it.\n    };\n\n    imageUpload = () => {\n        this.fileInput.current.click();\n    };\n\n    render(){\n        const { showImageHandler, selectedTool, selectTool, saveShape } = this.props;\n        return <Menu icon style={{border:'0px'}}>\n            <Menu.Item style={{backgroundColor: '#4d3a5b', color:'#fff'}}\n                       name='Tools'\n                       content='Tools'\n            />\n            <Menu.Item\n                style={selectedTool === 'polygon' ?\n                    {backgroundColor: '#60a',color: '#fff'} :\n                    {backgroundColor: '#fff',color: '#60a'}\n                }\n                name='polygon'\n                content=''\n                icon='gem'\n                onClick={selectTool}\n            />\n            <Menu.Item\n                style={selectedTool === 'rectangle' ?\n                    {backgroundColor: '#60a',color: '#fff'} :\n                    {backgroundColor: '#fff',color: '#60a'}\n                }\n                name='rectangle'\n                content=''\n                icon='square full'\n                onClick={selectTool}\n            />\n            <Menu.Item\n                style={selectedTool === 'circle' ?\n                    {backgroundColor: '#60a',color: '#fff'} :\n                    {backgroundColor: '#fff',color: '#60a'}\n                }\n                name='circle'\n                content=''\n                icon='circle'\n                onClick={selectTool}\n            />\n            <Menu.Item\n                style={selectedTool === 'raspberry' ?\n                    {backgroundColor: '#60a',color: '#fff'} :\n                    {backgroundColor: '#fff',color: '#60a'}\n                }\n                name='raspberry'\n                content=''\n                onClick={selectTool}\n            >\n                <FontAwesomeIcon icon={faRaspberryPi} />\n            </Menu.Item>\n            {\n                selectedTool==='polygon' ?\n                    <Menu.Item style={{backgroundColor: '#fff', color: '#4d3a5b'}}\n                               name='undo'\n                               content=''\n                               icon='undo'\n                               onClick={this.handleUndo}\n                    /> : null\n            }\n            <Menu.Item style={{backgroundColor: '#4d3a5b', color:'#fff'}}\n                       name='refresh'\n                       content=''\n                       icon='refresh'\n                       onClick={this.handleClear}\n            />\n            <Menu.Item style={{backgroundColor: '#4d3a5b', color:'#fff'}}\n                       name='image'\n                       content=''\n                       icon='image'\n                       onClick={showImageHandler}\n            />\n            <Menu.Item style={{backgroundColor: '#4d3a5b', color:'#fff'}}\n                       name='save'\n                       content=''\n                       icon='save'\n                       onClick={saveShape}\n            />\n            <Menu.Item style={{backgroundColor: '#4d3a5b', color:'#fff'}}\n                       name='upload'\n                       content=''\n                       onClick={this.imageUpload}\n            >\n                <Icon name='upload' />\n                <input type='file' id='single' ref={this.fileInput} onChange={this.onChange} hidden />\n            </Menu.Item>\n        </Menu>\n    }\n}\n","import {PureComponent} from \"react\";\nimport Konva from 'konva';\n\nexport class Canvas extends PureComponent{\n    constructor(props){\n        super(props);\n        this.state = {\n            stage: null,\n            layer:null,\n            shapes:[]\n        }\n    }\n\n    componentDidMount() {\n        const { shapes } = this.props;\n        const stage = new Konva.Stage({\n            width: window.innerWidth,\n            height: window.innerHeight-40,\n            container: '#containerForStage',\n            visible: true\n        });\n        const layer = new Konva.Layer({});\n        stage.add(layer);\n        stage.on('mouseup', this.mouseUpHandler);\n        stage.on('mousemove', this.mouseMoveHandler);\n        this.setState({ stage, layer, shapes });\n    }\n\n    drawShapes = async () => {\n        const { layer } = this.state;\n        const { shapes, showImage, image } = this.props;\n        if(layer!==null){\n            await layer.destroyChildren();\n            if(showImage && image) {\n                await Konva.Image.fromURL(image, async function (image) {\n                    await layer.add(image);\n                    image.zIndex(0);\n                    await layer.draw();\n                });\n            }\n            for(const s of shapes){\n                if(s.type==='polygon'){\n                    layer.add(new Konva.Line({\n                        points: s.shape,\n                        stroke: 'yellow',\n                        fill: 'yellow',\n                        closed: true,\n                        draggable:true\n                    }));\n                }else if(s.type==='rectangle'){\n                    layer.add(new Konva.Rect({\n                        ...s.shape,\n                        stroke: 'yellow',\n                        fill: 'yellow',\n                    }));\n                }else if(s.type==='circle'){\n                    layer.add(new Konva.Ring({\n                        ...s.shape,\n                        stroke: 'yellow',\n                        fill: 'yellow'\n                    }));\n                }else if(s.type==='raspberry'){\n                    layer.add(new Konva.Path({\n                        ...s.shape,\n                        fill: 'yellow',\n                        scaleX: 0.05,\n                        scaleY: 0.05\n                    }));\n                }\n            }\n            layer.draw();\n            const xxx = layer.findOne('#xxx');\n            if(xxx!==undefined) xxx.destroy();\n            this.point=null;\n            this.line=null;\n        }\n    };\n\n    point=null;\n    line=null;\n\n    circleDrawHandler = e => {\n        const {layer} = this.state;\n        const point = layer.findOne('#xxx');\n        if(point===undefined){\n            const ring = new Konva.Ring({\n                id: 'xxx',\n                x: e.evt.layerX,\n                y: e.evt.layerY,\n                outerRadius: 0,\n                innerRadius: 3,\n                fill: 'red',\n                stroke: 'black',\n                strokeWidth: 0\n            });\n            layer.add(ring);\n        }else{\n            point.setAttrs({x:e.evt.layerX,y:e.evt.layerY});\n        }\n        const circle = layer.findOne('#circle');\n        if(circle!==undefined){\n            console.log(e.evt.layerX,circle.attrs.x,'.',e.evt.layerY,circle.attrs.y,Math.sqrt(\n                Math.pow(e.evt.layerX-circle.attrs.x,2) +\n                Math.pow(e.evt.layerY-circle.attrs.y,2)\n            ),circle);\n            circle.setAttrs({innerRadius:Math.sqrt(\n                    Math.pow(e.evt.layerX-circle.attrs.x,2) +\n                    Math.pow(e.evt.layerY-circle.attrs.y,2)\n                )});\n        }\n        layer.draw();\n    };\n\n    rectangleDrawHandler = e => {\n        const {layer} = this.state;\n        // console.log(this.point,this.line,this.polygon)\n        if(layer.findOne('#xxx')!==undefined){\n            layer.findOne('#xxx').setAttrs({x:e.evt.layerX,y:e.evt.layerY});\n            if(layer.findOne('#rectangle')!==undefined) {\n                layer.findOne('#rectangle').setAttrs({\n                    width: e.evt.layerX - this.rectangle.x,\n                    height: e.evt.layerY - this.rectangle.y\n                });\n            }else if(\n                this.rectangle.x!==undefined &&\n                this.rectangle.y!==undefined\n            ){\n                const rectangle = new Konva.Rect({\n                    id: 'rectangle',\n                    x: this.rectangle.x,\n                    y: this.rectangle.y,\n                    width: e.evt.layerX - this.rectangle.x,\n                    height: e.evt.layerY - this.rectangle.y,\n                    stroke:'red'\n                });\n                layer.add(rectangle);\n            }\n        }else{\n            const ring = new Konva.Ring({\n                id: 'xxx',\n                ...this.point,\n                outerRadius: 0,\n                innerRadius: 3,\n                fill: 'red',\n                stroke: 'black',\n                strokeWidth: 0\n            });\n            layer.add(ring);\n        }\n        layer.draw();\n    };\n\n    polygonDrawHandler = e => {\n        const {layer} = this.state;\n        // console.log(this.point,this.line,this.polygon)\n        if(this.point===null) {\n            this.point = {x: e.evt.layerX, y: e.evt.layerY};\n            const ring = new Konva.Ring({\n                id: 'xxx',\n                ...this.point,\n                outerRadius: 0,\n                innerRadius: 3,\n                fill: 'red',\n                stroke: 'black',\n                strokeWidth: 0\n            });\n            layer.add(ring);\n        }\n        if(this.line===null && this.polygon.length>0){\n            this.line=[\n                this.polygon[this.polygon.length - 2],\n                this.polygon[this.polygon.length - 1],\n                e.evt.layerX,\n                e.evt.layerY\n            ];\n            const line = new Konva.Line({\n                id: 'xxy',\n                points: [\n                    this.polygon[this.polygon.length - 2],\n                    this.polygon[this.polygon.length - 1],\n                    e.evt.layerX,\n                    e.evt.layerY\n                ],\n                stroke: 'red',\n            });\n\n            layer.add(line);\n        }\n        if(layer.findOne('#xxx')!==undefined)\n            layer.findOne('#xxx').setAttrs({x:e.evt.layerX,y:e.evt.layerY});\n        if(this.polygon.length>0){\n            if(layer.findOne('#xxy')!==undefined)\n                layer.findOne('#xxy').setAttrs({points:[this.point.x,this.point.y,e.evt.layerX,e.evt.layerY]});\n        }\n        layer.draw();\n    };\n\n    raspberryDrawHandler = e => {\n        const {layer} = this.state;\n        const xxx = layer.findOne('#raspberry');\n        if(xxx){\n            xxx.setAttrs({\n                id:\"raspberry\",\n                x: e.evt.layerX-10,\n                y: e.evt.layerY-10,\n                data: 'M372 232.5l-3.7-6.5c.1-46.4-21.4-65.3-46.5-79.7 7.6-2 15.4-3.6 17.6-13.2 13.1-3.3 15.8-9.4 17.1-15.8 3.4-2.3 14.8-8.7 13.6-19.7 6.4-4.4 10-10.1 8.1-18.1 6.9-7.5 8.7-13.7 5.8-19.4 8.3-10.3 4.6-15.6 1.1-20.9 6.2-11.2.7-23.2-16.6-21.2-6.9-10.1-21.9-7.8-24.2-7.8-2.6-3.2-6-6-16.5-4.7-6.8-6.1-14.4-5-22.3-2.1-9.3-7.3-15.5-1.4-22.6.8C271.6.6 269 5.5 263.5 7.6c-12.3-2.6-16.1 3-22 8.9l-6.9-.1c-18.6 10.8-27.8 32.8-31.1 44.1-3.3-11.3-12.5-33.3-31.1-44.1l-6.9.1c-5.9-5.9-9.7-11.5-22-8.9-5.6-2-8.1-7-19.4-3.4-4.6-1.4-8.9-4.4-13.9-4.3-2.6.1-5.5 1-8.7 3.5-7.9-3-15.5-4-22.3 2.1-10.5-1.3-14 1.4-16.5 4.7-2.3 0-17.3-2.3-24.2 7.8C21.2 16 15.8 28 22 39.2c-3.5 5.4-7.2 10.7 1.1 20.9-2.9 5.7-1.1 11.9 5.8 19.4-1.8 8 1.8 13.7 8.1 18.1-1.2 11 10.2 17.4 13.6 19.7 1.3 6.4 4 12.4 17.1 15.8 2.2 9.5 10 11.2 17.6 13.2-25.1 14.4-46.6 33.3-46.5 79.7l-3.7 6.5c-28.8 17.2-54.7 72.7-14.2 117.7 2.6 14.1 7.1 24.2 11 35.4 5.9 45.2 44.5 66.3 54.6 68.8 14.9 11.2 30.8 21.8 52.2 29.2C159 504.2 181 512 203 512h1c22.1 0 44-7.8 64.2-28.4 21.5-7.4 37.3-18 52.2-29.2 10.2-2.5 48.7-23.6 54.6-68.8 3.9-11.2 8.4-21.3 11-35.4 40.6-45.1 14.7-100.5-14-117.7zm-22.2-8c-1.5 18.7-98.9-65.1-82.1-67.9 45.7-7.5 83.6 19.2 82.1 67.9zm-43 93.1c-24.5 15.8-59.8 5.6-78.8-22.8s-14.6-64.2 9.9-80c24.5-15.8 59.8-5.6 78.8 22.8s14.6 64.2-9.9 80zM238.9 29.3c.8 4.2 1.8 6.8 2.9 7.6 5.4-5.8 9.8-11.7 16.8-17.3 0 3.3-1.7 6.8 2.5 9.4 3.7-5 8.8-9.5 15.5-13.3-3.2 5.6-.6 7.3 1.2 9.6 5.1-4.4 10-8.8 19.4-12.3-2.6 3.1-6.2 6.2-2.4 9.8 5.3-3.3 10.6-6.6 23.1-8.9-2.8 3.1-8.7 6.3-5.1 9.4 6.6-2.5 14-4.4 22.1-5.4-3.9 3.2-7.1 6.3-3.9 8.8 7.1-2.2 16.9-5.1 26.4-2.6l-6 6.1c-.7.8 14.1.6 23.9.8-3.6 5-7.2 9.7-9.3 18.2 1 1 5.8.4 10.4 0-4.7 9.9-12.8 12.3-14.7 16.6 2.9 2.2 6.8 1.6 11.2.1-3.4 6.9-10.4 11.7-16 17.3 1.4 1 3.9 1.6 9.7.9-5.2 5.5-11.4 10.5-18.8 15 1.3 1.5 5.8 1.5 10 1.6-6.7 6.5-15.3 9.9-23.4 14.2 4 2.7 6.9 2.1 10 2.1-5.7 4.7-15.4 7.1-24.4 10 1.7 2.7 3.4 3.4 7.1 4.1-9.5 5.3-23.2 2.9-27 5.6.9 2.7 3.6 4.4 6.7 5.8-15.4.9-57.3-.6-65.4-32.3 15.7-17.3 44.4-37.5 93.7-62.6-38.4 12.8-73 30-102 53.5-34.3-15.9-10.8-55.9 5.8-71.8zm-34.4 114.6c24.2-.3 54.1 17.8 54 34.7-.1 15-21 27.1-53.8 26.9-32.1-.4-53.7-15.2-53.6-29.8 0-11.9 26.2-32.5 53.4-31.8zm-123-12.8c3.7-.7 5.4-1.5 7.1-4.1-9-2.8-18.7-5.3-24.4-10 3.1 0 6 .7 10-2.1-8.1-4.3-16.7-7.7-23.4-14.2 4.2-.1 8.7 0 10-1.6-7.4-4.5-13.6-9.5-18.8-15 5.8.7 8.3.1 9.7-.9-5.6-5.6-12.7-10.4-16-17.3 4.3 1.5 8.3 2 11.2-.1-1.9-4.2-10-6.7-14.7-16.6 4.6.4 9.4 1 10.4 0-2.1-8.5-5.8-13.3-9.3-18.2 9.8-.1 24.6 0 23.9-.8l-6-6.1c9.5-2.5 19.3.4 26.4 2.6 3.2-2.5-.1-5.6-3.9-8.8 8.1 1.1 15.4 2.9 22.1 5.4 3.5-3.1-2.3-6.3-5.1-9.4 12.5 2.3 17.8 5.6 23.1 8.9 3.8-3.6.2-6.7-2.4-9.8 9.4 3.4 14.3 7.9 19.4 12.3 1.7-2.3 4.4-4 1.2-9.6 6.7 3.8 11.8 8.3 15.5 13.3 4.1-2.6 2.5-6.2 2.5-9.4 7 5.6 11.4 11.5 16.8 17.3 1.1-.8 2-3.4 2.9-7.6 16.6 15.9 40.1 55.9 6 71.8-29-23.5-63.6-40.7-102-53.5 49.3 25 78 45.3 93.7 62.6-8 31.8-50 33.2-65.4 32.3 3.1-1.4 5.8-3.2 6.7-5.8-4-2.8-17.6-.4-27.2-5.6zm60.1 24.1c16.8 2.8-80.6 86.5-82.1 67.9-1.5-48.7 36.5-75.5 82.1-67.9zM38.2 342c-23.7-18.8-31.3-73.7 12.6-98.3 26.5-7 9 107.8-12.6 98.3zm91 98.2c-13.3 7.9-45.8 4.7-68.8-27.9-15.5-27.4-13.5-55.2-2.6-63.4 16.3-9.8 41.5 3.4 60.9 25.6 16.9 20 24.6 55.3 10.5 65.7zm-26.4-119.7c-24.5-15.8-28.9-51.6-9.9-80s54.3-38.6 78.8-22.8 28.9 51.6 9.9 80c-19.1 28.4-54.4 38.6-78.8 22.8zM205 496c-29.4 1.2-58.2-23.7-57.8-32.3-.4-12.7 35.8-22.6 59.3-22 23.7-1 55.6 7.5 55.7 18.9.5 11-28.8 35.9-57.2 35.4zm58.9-124.9c.2 29.7-26.2 53.8-58.8 54-32.6.2-59.2-23.8-59.4-53.4v-.6c-.2-29.7 26.2-53.8 58.8-54 32.6-.2 59.2 23.8 59.4 53.4v.6zm82.2 42.7c-25.3 34.6-59.6 35.9-72.3 26.3-13.3-12.4-3.2-50.9 15.1-72 20.9-23.3 43.3-38.5 58.9-26.6 10.5 10.3 16.7 49.1-1.7 72.3zm22.9-73.2c-21.5 9.4-39-105.3-12.6-98.3 43.9 24.7 36.3 79.6 12.6 98.3z',\n                fill: 'red',\n                scaleX: 0.05,\n                scaleY: 0.05\n            });\n            layer.draw();\n        }else{\n            const raspBerry = new Konva.Path({\n                id:\"raspberry\",\n                x: e.evt.layerX-10,\n                y: e.evt.layerY-10,\n                data: 'M372 232.5l-3.7-6.5c.1-46.4-21.4-65.3-46.5-79.7 7.6-2 15.4-3.6 17.6-13.2 13.1-3.3 15.8-9.4 17.1-15.8 3.4-2.3 14.8-8.7 13.6-19.7 6.4-4.4 10-10.1 8.1-18.1 6.9-7.5 8.7-13.7 5.8-19.4 8.3-10.3 4.6-15.6 1.1-20.9 6.2-11.2.7-23.2-16.6-21.2-6.9-10.1-21.9-7.8-24.2-7.8-2.6-3.2-6-6-16.5-4.7-6.8-6.1-14.4-5-22.3-2.1-9.3-7.3-15.5-1.4-22.6.8C271.6.6 269 5.5 263.5 7.6c-12.3-2.6-16.1 3-22 8.9l-6.9-.1c-18.6 10.8-27.8 32.8-31.1 44.1-3.3-11.3-12.5-33.3-31.1-44.1l-6.9.1c-5.9-5.9-9.7-11.5-22-8.9-5.6-2-8.1-7-19.4-3.4-4.6-1.4-8.9-4.4-13.9-4.3-2.6.1-5.5 1-8.7 3.5-7.9-3-15.5-4-22.3 2.1-10.5-1.3-14 1.4-16.5 4.7-2.3 0-17.3-2.3-24.2 7.8C21.2 16 15.8 28 22 39.2c-3.5 5.4-7.2 10.7 1.1 20.9-2.9 5.7-1.1 11.9 5.8 19.4-1.8 8 1.8 13.7 8.1 18.1-1.2 11 10.2 17.4 13.6 19.7 1.3 6.4 4 12.4 17.1 15.8 2.2 9.5 10 11.2 17.6 13.2-25.1 14.4-46.6 33.3-46.5 79.7l-3.7 6.5c-28.8 17.2-54.7 72.7-14.2 117.7 2.6 14.1 7.1 24.2 11 35.4 5.9 45.2 44.5 66.3 54.6 68.8 14.9 11.2 30.8 21.8 52.2 29.2C159 504.2 181 512 203 512h1c22.1 0 44-7.8 64.2-28.4 21.5-7.4 37.3-18 52.2-29.2 10.2-2.5 48.7-23.6 54.6-68.8 3.9-11.2 8.4-21.3 11-35.4 40.6-45.1 14.7-100.5-14-117.7zm-22.2-8c-1.5 18.7-98.9-65.1-82.1-67.9 45.7-7.5 83.6 19.2 82.1 67.9zm-43 93.1c-24.5 15.8-59.8 5.6-78.8-22.8s-14.6-64.2 9.9-80c24.5-15.8 59.8-5.6 78.8 22.8s14.6 64.2-9.9 80zM238.9 29.3c.8 4.2 1.8 6.8 2.9 7.6 5.4-5.8 9.8-11.7 16.8-17.3 0 3.3-1.7 6.8 2.5 9.4 3.7-5 8.8-9.5 15.5-13.3-3.2 5.6-.6 7.3 1.2 9.6 5.1-4.4 10-8.8 19.4-12.3-2.6 3.1-6.2 6.2-2.4 9.8 5.3-3.3 10.6-6.6 23.1-8.9-2.8 3.1-8.7 6.3-5.1 9.4 6.6-2.5 14-4.4 22.1-5.4-3.9 3.2-7.1 6.3-3.9 8.8 7.1-2.2 16.9-5.1 26.4-2.6l-6 6.1c-.7.8 14.1.6 23.9.8-3.6 5-7.2 9.7-9.3 18.2 1 1 5.8.4 10.4 0-4.7 9.9-12.8 12.3-14.7 16.6 2.9 2.2 6.8 1.6 11.2.1-3.4 6.9-10.4 11.7-16 17.3 1.4 1 3.9 1.6 9.7.9-5.2 5.5-11.4 10.5-18.8 15 1.3 1.5 5.8 1.5 10 1.6-6.7 6.5-15.3 9.9-23.4 14.2 4 2.7 6.9 2.1 10 2.1-5.7 4.7-15.4 7.1-24.4 10 1.7 2.7 3.4 3.4 7.1 4.1-9.5 5.3-23.2 2.9-27 5.6.9 2.7 3.6 4.4 6.7 5.8-15.4.9-57.3-.6-65.4-32.3 15.7-17.3 44.4-37.5 93.7-62.6-38.4 12.8-73 30-102 53.5-34.3-15.9-10.8-55.9 5.8-71.8zm-34.4 114.6c24.2-.3 54.1 17.8 54 34.7-.1 15-21 27.1-53.8 26.9-32.1-.4-53.7-15.2-53.6-29.8 0-11.9 26.2-32.5 53.4-31.8zm-123-12.8c3.7-.7 5.4-1.5 7.1-4.1-9-2.8-18.7-5.3-24.4-10 3.1 0 6 .7 10-2.1-8.1-4.3-16.7-7.7-23.4-14.2 4.2-.1 8.7 0 10-1.6-7.4-4.5-13.6-9.5-18.8-15 5.8.7 8.3.1 9.7-.9-5.6-5.6-12.7-10.4-16-17.3 4.3 1.5 8.3 2 11.2-.1-1.9-4.2-10-6.7-14.7-16.6 4.6.4 9.4 1 10.4 0-2.1-8.5-5.8-13.3-9.3-18.2 9.8-.1 24.6 0 23.9-.8l-6-6.1c9.5-2.5 19.3.4 26.4 2.6 3.2-2.5-.1-5.6-3.9-8.8 8.1 1.1 15.4 2.9 22.1 5.4 3.5-3.1-2.3-6.3-5.1-9.4 12.5 2.3 17.8 5.6 23.1 8.9 3.8-3.6.2-6.7-2.4-9.8 9.4 3.4 14.3 7.9 19.4 12.3 1.7-2.3 4.4-4 1.2-9.6 6.7 3.8 11.8 8.3 15.5 13.3 4.1-2.6 2.5-6.2 2.5-9.4 7 5.6 11.4 11.5 16.8 17.3 1.1-.8 2-3.4 2.9-7.6 16.6 15.9 40.1 55.9 6 71.8-29-23.5-63.6-40.7-102-53.5 49.3 25 78 45.3 93.7 62.6-8 31.8-50 33.2-65.4 32.3 3.1-1.4 5.8-3.2 6.7-5.8-4-2.8-17.6-.4-27.2-5.6zm60.1 24.1c16.8 2.8-80.6 86.5-82.1 67.9-1.5-48.7 36.5-75.5 82.1-67.9zM38.2 342c-23.7-18.8-31.3-73.7 12.6-98.3 26.5-7 9 107.8-12.6 98.3zm91 98.2c-13.3 7.9-45.8 4.7-68.8-27.9-15.5-27.4-13.5-55.2-2.6-63.4 16.3-9.8 41.5 3.4 60.9 25.6 16.9 20 24.6 55.3 10.5 65.7zm-26.4-119.7c-24.5-15.8-28.9-51.6-9.9-80s54.3-38.6 78.8-22.8 28.9 51.6 9.9 80c-19.1 28.4-54.4 38.6-78.8 22.8zM205 496c-29.4 1.2-58.2-23.7-57.8-32.3-.4-12.7 35.8-22.6 59.3-22 23.7-1 55.6 7.5 55.7 18.9.5 11-28.8 35.9-57.2 35.4zm58.9-124.9c.2 29.7-26.2 53.8-58.8 54-32.6.2-59.2-23.8-59.4-53.4v-.6c-.2-29.7 26.2-53.8 58.8-54 32.6-.2 59.2 23.8 59.4 53.4v.6zm82.2 42.7c-25.3 34.6-59.6 35.9-72.3 26.3-13.3-12.4-3.2-50.9 15.1-72 20.9-23.3 43.3-38.5 58.9-26.6 10.5 10.3 16.7 49.1-1.7 72.3zm22.9-73.2c-21.5 9.4-39-105.3-12.6-98.3 43.9 24.7 36.3 79.6 12.6 98.3z',\n                fill: 'red',\n                scaleX: 0.05,\n                scaleY: 0.05\n            });\n            layer.add(raspBerry);\n            layer.draw();\n        }\n    };\n\n    mouseMoveHandler = e => {\n        const {selectedTool} = this.props;\n        if(selectedTool==='polygon') {\n            this.polygonDrawHandler(e);\n        }else if(selectedTool==='rectangle'){\n            this.rectangleDrawHandler(e);\n        }else if(selectedTool==='circle'){\n            this.circleDrawHandler(e);\n        }else if(selectedTool==='raspberry'){\n            console.log(e)\n            this.raspberryDrawHandler(e);\n        }\n    };\n\n    rectangle = {};\n    polygon = [];\n    oldTarget=null;\n    mouseUpHandler = e => {\n        this.line=null;\n        const {layer} = this.state;\n        const { isReadyToSaveHaveHandler, selectedTool, changeShape } = this.props;\n        if(selectedTool === null) {\n            return;\n        }else if(selectedTool==='select'){\n            if(this.oldTarget!==null && this.oldTarget!==undefined){\n                if(e.target._id===this.oldTarget._id) return;\n                this.oldTarget.setAttrs({\n                    stroke:'yellow'\n                });\n            }\n            this.oldTarget=e.target;\n            e.target.setAttrs({\n                stroke:'red',\n            });\n            const tr = new Konva.Transformer();\n            layer.add(tr);\n            tr.attachTo(e.target);\n            e.target.on('transform', function() {\n                console.log(e.target.parent,tr.parent);\n            });\n            layer.draw();\n            return;\n        }\n        const point = new Konva.Ring({\n            x:e.evt.layerX,\n            y:e.evt.layerY,\n            outerRadius: 0,\n            innerRadius: 5,\n            fill: 'red',\n            stroke: 'black',\n            strokeWidth: 0\n        });\n        if(selectedTool === 'polygon') {\n            this.point={x:e.evt.layerX,y:e.evt.layerY};\n            if (this.polygon.length > 1){\n                if(\n                    this.polygon[0]>=e.evt.layerX-5 &&\n                    this.polygon[0]<=e.evt.layerX+5 &&\n                    this.polygon[1]>=e.evt.layerY-5 &&\n                    this.polygon[1]<=e.evt.layerY+5\n                ){\n                    const line = new Konva.Line({\n                        points: [\n                            this.polygon[this.polygon.length - 2],\n                            this.polygon[this.polygon.length - 1],\n                            this.polygon[0],\n                            this.polygon[1]\n                        ],\n                        stroke: 'red',\n                    });\n                    layer.add(line);\n                    point.setAttrs({x:this.polygon[0], y:this.polygon[1]});\n                    changeShape([...this.polygon,this.polygon[0],this.polygon[1]]);\n                    this.point=null;\n                    this.line=null;\n                    this.polygon=[];\n                    layer.findOne('#xxy').destroy();\n                    isReadyToSaveHaveHandler(true);\n                }else{\n                    const line = new Konva.Line({\n                        points: [\n                            this.polygon[this.polygon.length - 2],\n                            this.polygon[this.polygon.length - 1],\n                            e.evt.layerX,\n                            e.evt.layerY\n                        ],\n                        stroke: 'red',\n                    });\n                    layer.add(line);\n                    this.polygon.push(e.evt.layerX,e.evt.layerY);\n                }\n            }else{\n                this.polygon.push(e.evt.layerX,e.evt.layerY);\n            }\n        }else if(selectedTool==='rectangle'){\n            if(this.rectangle.x===undefined || this.rectangle.y===undefined){\n                this.rectangle = {x: e.evt.layerX, y: e.evt.layerY};\n                console.log(this.rectangle)\n            }else{\n                const rectangle = new Konva.Rect({\n                    x: this.rectangle.x,\n                    y: this.rectangle.y,\n                    width: e.evt.layerX - this.rectangle.x,\n                    height: e.evt.layerY - this.rectangle.y,\n                    stroke:'red'\n                });\n                layer.add(rectangle);\n                changeShape({\n                    x: this.rectangle.x,\n                    y: this.rectangle.y,\n                    width: e.evt.layerX - this.rectangle.x,\n                    height: e.evt.layerY - this.rectangle.y\n                });\n                this.point=null;\n                this.rectangle={};\n                layer.findOne('#rectangle').destroy();\n                isReadyToSaveHaveHandler(true);\n            }\n        }else if(selectedTool==='circle'){\n            const circle = layer.findOne('#circle');\n            if(circle === undefined){\n                const addCircle = new Konva.Ring({\n                    id:'circle',\n                    x:e.evt.layerX,\n                    y:e.evt.layerY,\n                    outerRadius: 0,\n                    innerRadius: 5,\n                    stroke: 'red'\n                });\n                layer.add(addCircle);\n            }else{\n                const addCircle = new Konva.Ring({\n                    x: circle.attrs.x,\n                    y: circle.attrs.y,\n                    outerRadius: 0,\n                    innerRadius: Math.sqrt(\n                        Math.pow(e.evt.layerX-circle.attrs.x,2) +\n                        Math.pow(e.evt.layerY-circle.attrs.y,2)\n                    ),\n                    stroke: 'red'\n                });\n                layer.add(addCircle);\n                changeShape({\n                    x: circle.attrs.x,\n                    y: circle.attrs.y,\n                    innerRadius: Math.sqrt(\n                        Math.pow(e.evt.layerX-circle.attrs.x,2) +\n                        Math.pow(e.evt.layerY-circle.attrs.y,2)\n                    ),\n                });\n                this.point=null;\n                this.rectangle={};\n                layer.findOne('#circle').destroy();\n                isReadyToSaveHaveHandler(true);\n            }\n        }else if(selectedTool==='raspberry'){\n            if(layer.findOne('#raspberry')){\n                layer.findOne('#raspberry').destroy();\n            }\n            const raspBerry = new Konva.Path({\n                x: e.evt.layerX-10,\n                y: e.evt.layerY-10,\n                data: 'M372 232.5l-3.7-6.5c.1-46.4-21.4-65.3-46.5-79.7 7.6-2 15.4-3.6 17.6-13.2 13.1-3.3 15.8-9.4 17.1-15.8 3.4-2.3 14.8-8.7 13.6-19.7 6.4-4.4 10-10.1 8.1-18.1 6.9-7.5 8.7-13.7 5.8-19.4 8.3-10.3 4.6-15.6 1.1-20.9 6.2-11.2.7-23.2-16.6-21.2-6.9-10.1-21.9-7.8-24.2-7.8-2.6-3.2-6-6-16.5-4.7-6.8-6.1-14.4-5-22.3-2.1-9.3-7.3-15.5-1.4-22.6.8C271.6.6 269 5.5 263.5 7.6c-12.3-2.6-16.1 3-22 8.9l-6.9-.1c-18.6 10.8-27.8 32.8-31.1 44.1-3.3-11.3-12.5-33.3-31.1-44.1l-6.9.1c-5.9-5.9-9.7-11.5-22-8.9-5.6-2-8.1-7-19.4-3.4-4.6-1.4-8.9-4.4-13.9-4.3-2.6.1-5.5 1-8.7 3.5-7.9-3-15.5-4-22.3 2.1-10.5-1.3-14 1.4-16.5 4.7-2.3 0-17.3-2.3-24.2 7.8C21.2 16 15.8 28 22 39.2c-3.5 5.4-7.2 10.7 1.1 20.9-2.9 5.7-1.1 11.9 5.8 19.4-1.8 8 1.8 13.7 8.1 18.1-1.2 11 10.2 17.4 13.6 19.7 1.3 6.4 4 12.4 17.1 15.8 2.2 9.5 10 11.2 17.6 13.2-25.1 14.4-46.6 33.3-46.5 79.7l-3.7 6.5c-28.8 17.2-54.7 72.7-14.2 117.7 2.6 14.1 7.1 24.2 11 35.4 5.9 45.2 44.5 66.3 54.6 68.8 14.9 11.2 30.8 21.8 52.2 29.2C159 504.2 181 512 203 512h1c22.1 0 44-7.8 64.2-28.4 21.5-7.4 37.3-18 52.2-29.2 10.2-2.5 48.7-23.6 54.6-68.8 3.9-11.2 8.4-21.3 11-35.4 40.6-45.1 14.7-100.5-14-117.7zm-22.2-8c-1.5 18.7-98.9-65.1-82.1-67.9 45.7-7.5 83.6 19.2 82.1 67.9zm-43 93.1c-24.5 15.8-59.8 5.6-78.8-22.8s-14.6-64.2 9.9-80c24.5-15.8 59.8-5.6 78.8 22.8s14.6 64.2-9.9 80zM238.9 29.3c.8 4.2 1.8 6.8 2.9 7.6 5.4-5.8 9.8-11.7 16.8-17.3 0 3.3-1.7 6.8 2.5 9.4 3.7-5 8.8-9.5 15.5-13.3-3.2 5.6-.6 7.3 1.2 9.6 5.1-4.4 10-8.8 19.4-12.3-2.6 3.1-6.2 6.2-2.4 9.8 5.3-3.3 10.6-6.6 23.1-8.9-2.8 3.1-8.7 6.3-5.1 9.4 6.6-2.5 14-4.4 22.1-5.4-3.9 3.2-7.1 6.3-3.9 8.8 7.1-2.2 16.9-5.1 26.4-2.6l-6 6.1c-.7.8 14.1.6 23.9.8-3.6 5-7.2 9.7-9.3 18.2 1 1 5.8.4 10.4 0-4.7 9.9-12.8 12.3-14.7 16.6 2.9 2.2 6.8 1.6 11.2.1-3.4 6.9-10.4 11.7-16 17.3 1.4 1 3.9 1.6 9.7.9-5.2 5.5-11.4 10.5-18.8 15 1.3 1.5 5.8 1.5 10 1.6-6.7 6.5-15.3 9.9-23.4 14.2 4 2.7 6.9 2.1 10 2.1-5.7 4.7-15.4 7.1-24.4 10 1.7 2.7 3.4 3.4 7.1 4.1-9.5 5.3-23.2 2.9-27 5.6.9 2.7 3.6 4.4 6.7 5.8-15.4.9-57.3-.6-65.4-32.3 15.7-17.3 44.4-37.5 93.7-62.6-38.4 12.8-73 30-102 53.5-34.3-15.9-10.8-55.9 5.8-71.8zm-34.4 114.6c24.2-.3 54.1 17.8 54 34.7-.1 15-21 27.1-53.8 26.9-32.1-.4-53.7-15.2-53.6-29.8 0-11.9 26.2-32.5 53.4-31.8zm-123-12.8c3.7-.7 5.4-1.5 7.1-4.1-9-2.8-18.7-5.3-24.4-10 3.1 0 6 .7 10-2.1-8.1-4.3-16.7-7.7-23.4-14.2 4.2-.1 8.7 0 10-1.6-7.4-4.5-13.6-9.5-18.8-15 5.8.7 8.3.1 9.7-.9-5.6-5.6-12.7-10.4-16-17.3 4.3 1.5 8.3 2 11.2-.1-1.9-4.2-10-6.7-14.7-16.6 4.6.4 9.4 1 10.4 0-2.1-8.5-5.8-13.3-9.3-18.2 9.8-.1 24.6 0 23.9-.8l-6-6.1c9.5-2.5 19.3.4 26.4 2.6 3.2-2.5-.1-5.6-3.9-8.8 8.1 1.1 15.4 2.9 22.1 5.4 3.5-3.1-2.3-6.3-5.1-9.4 12.5 2.3 17.8 5.6 23.1 8.9 3.8-3.6.2-6.7-2.4-9.8 9.4 3.4 14.3 7.9 19.4 12.3 1.7-2.3 4.4-4 1.2-9.6 6.7 3.8 11.8 8.3 15.5 13.3 4.1-2.6 2.5-6.2 2.5-9.4 7 5.6 11.4 11.5 16.8 17.3 1.1-.8 2-3.4 2.9-7.6 16.6 15.9 40.1 55.9 6 71.8-29-23.5-63.6-40.7-102-53.5 49.3 25 78 45.3 93.7 62.6-8 31.8-50 33.2-65.4 32.3 3.1-1.4 5.8-3.2 6.7-5.8-4-2.8-17.6-.4-27.2-5.6zm60.1 24.1c16.8 2.8-80.6 86.5-82.1 67.9-1.5-48.7 36.5-75.5 82.1-67.9zM38.2 342c-23.7-18.8-31.3-73.7 12.6-98.3 26.5-7 9 107.8-12.6 98.3zm91 98.2c-13.3 7.9-45.8 4.7-68.8-27.9-15.5-27.4-13.5-55.2-2.6-63.4 16.3-9.8 41.5 3.4 60.9 25.6 16.9 20 24.6 55.3 10.5 65.7zm-26.4-119.7c-24.5-15.8-28.9-51.6-9.9-80s54.3-38.6 78.8-22.8 28.9 51.6 9.9 80c-19.1 28.4-54.4 38.6-78.8 22.8zM205 496c-29.4 1.2-58.2-23.7-57.8-32.3-.4-12.7 35.8-22.6 59.3-22 23.7-1 55.6 7.5 55.7 18.9.5 11-28.8 35.9-57.2 35.4zm58.9-124.9c.2 29.7-26.2 53.8-58.8 54-32.6.2-59.2-23.8-59.4-53.4v-.6c-.2-29.7 26.2-53.8 58.8-54 32.6-.2 59.2 23.8 59.4 53.4v.6zm82.2 42.7c-25.3 34.6-59.6 35.9-72.3 26.3-13.3-12.4-3.2-50.9 15.1-72 20.9-23.3 43.3-38.5 58.9-26.6 10.5 10.3 16.7 49.1-1.7 72.3zm22.9-73.2c-21.5 9.4-39-105.3-12.6-98.3 43.9 24.7 36.3 79.6 12.6 98.3z',\n                fill: 'red',\n                scaleX: 0.05,\n                scaleY: 0.05\n            });\n            layer.add(raspBerry);\n            changeShape({\n                x: e.evt.layerX-10,\n                y: e.evt.layerY-10,\n                data: 'M372 232.5l-3.7-6.5c.1-46.4-21.4-65.3-46.5-79.7 7.6-2 15.4-3.6 17.6-13.2 13.1-3.3 15.8-9.4 17.1-15.8 3.4-2.3 14.8-8.7 13.6-19.7 6.4-4.4 10-10.1 8.1-18.1 6.9-7.5 8.7-13.7 5.8-19.4 8.3-10.3 4.6-15.6 1.1-20.9 6.2-11.2.7-23.2-16.6-21.2-6.9-10.1-21.9-7.8-24.2-7.8-2.6-3.2-6-6-16.5-4.7-6.8-6.1-14.4-5-22.3-2.1-9.3-7.3-15.5-1.4-22.6.8C271.6.6 269 5.5 263.5 7.6c-12.3-2.6-16.1 3-22 8.9l-6.9-.1c-18.6 10.8-27.8 32.8-31.1 44.1-3.3-11.3-12.5-33.3-31.1-44.1l-6.9.1c-5.9-5.9-9.7-11.5-22-8.9-5.6-2-8.1-7-19.4-3.4-4.6-1.4-8.9-4.4-13.9-4.3-2.6.1-5.5 1-8.7 3.5-7.9-3-15.5-4-22.3 2.1-10.5-1.3-14 1.4-16.5 4.7-2.3 0-17.3-2.3-24.2 7.8C21.2 16 15.8 28 22 39.2c-3.5 5.4-7.2 10.7 1.1 20.9-2.9 5.7-1.1 11.9 5.8 19.4-1.8 8 1.8 13.7 8.1 18.1-1.2 11 10.2 17.4 13.6 19.7 1.3 6.4 4 12.4 17.1 15.8 2.2 9.5 10 11.2 17.6 13.2-25.1 14.4-46.6 33.3-46.5 79.7l-3.7 6.5c-28.8 17.2-54.7 72.7-14.2 117.7 2.6 14.1 7.1 24.2 11 35.4 5.9 45.2 44.5 66.3 54.6 68.8 14.9 11.2 30.8 21.8 52.2 29.2C159 504.2 181 512 203 512h1c22.1 0 44-7.8 64.2-28.4 21.5-7.4 37.3-18 52.2-29.2 10.2-2.5 48.7-23.6 54.6-68.8 3.9-11.2 8.4-21.3 11-35.4 40.6-45.1 14.7-100.5-14-117.7zm-22.2-8c-1.5 18.7-98.9-65.1-82.1-67.9 45.7-7.5 83.6 19.2 82.1 67.9zm-43 93.1c-24.5 15.8-59.8 5.6-78.8-22.8s-14.6-64.2 9.9-80c24.5-15.8 59.8-5.6 78.8 22.8s14.6 64.2-9.9 80zM238.9 29.3c.8 4.2 1.8 6.8 2.9 7.6 5.4-5.8 9.8-11.7 16.8-17.3 0 3.3-1.7 6.8 2.5 9.4 3.7-5 8.8-9.5 15.5-13.3-3.2 5.6-.6 7.3 1.2 9.6 5.1-4.4 10-8.8 19.4-12.3-2.6 3.1-6.2 6.2-2.4 9.8 5.3-3.3 10.6-6.6 23.1-8.9-2.8 3.1-8.7 6.3-5.1 9.4 6.6-2.5 14-4.4 22.1-5.4-3.9 3.2-7.1 6.3-3.9 8.8 7.1-2.2 16.9-5.1 26.4-2.6l-6 6.1c-.7.8 14.1.6 23.9.8-3.6 5-7.2 9.7-9.3 18.2 1 1 5.8.4 10.4 0-4.7 9.9-12.8 12.3-14.7 16.6 2.9 2.2 6.8 1.6 11.2.1-3.4 6.9-10.4 11.7-16 17.3 1.4 1 3.9 1.6 9.7.9-5.2 5.5-11.4 10.5-18.8 15 1.3 1.5 5.8 1.5 10 1.6-6.7 6.5-15.3 9.9-23.4 14.2 4 2.7 6.9 2.1 10 2.1-5.7 4.7-15.4 7.1-24.4 10 1.7 2.7 3.4 3.4 7.1 4.1-9.5 5.3-23.2 2.9-27 5.6.9 2.7 3.6 4.4 6.7 5.8-15.4.9-57.3-.6-65.4-32.3 15.7-17.3 44.4-37.5 93.7-62.6-38.4 12.8-73 30-102 53.5-34.3-15.9-10.8-55.9 5.8-71.8zm-34.4 114.6c24.2-.3 54.1 17.8 54 34.7-.1 15-21 27.1-53.8 26.9-32.1-.4-53.7-15.2-53.6-29.8 0-11.9 26.2-32.5 53.4-31.8zm-123-12.8c3.7-.7 5.4-1.5 7.1-4.1-9-2.8-18.7-5.3-24.4-10 3.1 0 6 .7 10-2.1-8.1-4.3-16.7-7.7-23.4-14.2 4.2-.1 8.7 0 10-1.6-7.4-4.5-13.6-9.5-18.8-15 5.8.7 8.3.1 9.7-.9-5.6-5.6-12.7-10.4-16-17.3 4.3 1.5 8.3 2 11.2-.1-1.9-4.2-10-6.7-14.7-16.6 4.6.4 9.4 1 10.4 0-2.1-8.5-5.8-13.3-9.3-18.2 9.8-.1 24.6 0 23.9-.8l-6-6.1c9.5-2.5 19.3.4 26.4 2.6 3.2-2.5-.1-5.6-3.9-8.8 8.1 1.1 15.4 2.9 22.1 5.4 3.5-3.1-2.3-6.3-5.1-9.4 12.5 2.3 17.8 5.6 23.1 8.9 3.8-3.6.2-6.7-2.4-9.8 9.4 3.4 14.3 7.9 19.4 12.3 1.7-2.3 4.4-4 1.2-9.6 6.7 3.8 11.8 8.3 15.5 13.3 4.1-2.6 2.5-6.2 2.5-9.4 7 5.6 11.4 11.5 16.8 17.3 1.1-.8 2-3.4 2.9-7.6 16.6 15.9 40.1 55.9 6 71.8-29-23.5-63.6-40.7-102-53.5 49.3 25 78 45.3 93.7 62.6-8 31.8-50 33.2-65.4 32.3 3.1-1.4 5.8-3.2 6.7-5.8-4-2.8-17.6-.4-27.2-5.6zm60.1 24.1c16.8 2.8-80.6 86.5-82.1 67.9-1.5-48.7 36.5-75.5 82.1-67.9zM38.2 342c-23.7-18.8-31.3-73.7 12.6-98.3 26.5-7 9 107.8-12.6 98.3zm91 98.2c-13.3 7.9-45.8 4.7-68.8-27.9-15.5-27.4-13.5-55.2-2.6-63.4 16.3-9.8 41.5 3.4 60.9 25.6 16.9 20 24.6 55.3 10.5 65.7zm-26.4-119.7c-24.5-15.8-28.9-51.6-9.9-80s54.3-38.6 78.8-22.8 28.9 51.6 9.9 80c-19.1 28.4-54.4 38.6-78.8 22.8zM205 496c-29.4 1.2-58.2-23.7-57.8-32.3-.4-12.7 35.8-22.6 59.3-22 23.7-1 55.6 7.5 55.7 18.9.5 11-28.8 35.9-57.2 35.4zm58.9-124.9c.2 29.7-26.2 53.8-58.8 54-32.6.2-59.2-23.8-59.4-53.4v-.6c-.2-29.7 26.2-53.8 58.8-54 32.6-.2 59.2 23.8 59.4 53.4v.6zm82.2 42.7c-25.3 34.6-59.6 35.9-72.3 26.3-13.3-12.4-3.2-50.9 15.1-72 20.9-23.3 43.3-38.5 58.9-26.6 10.5 10.3 16.7 49.1-1.7 72.3zm22.9-73.2c-21.5 9.4-39-105.3-12.6-98.3 43.9 24.7 36.3 79.6 12.6 98.3z',\n            });\n            isReadyToSaveHaveHandler(true);\n        }\n        layer.add(point);\n        layer.draw()\n    };\n\n    render(){\n        console.log(\"rendering....\", this.props);\n        this.drawShapes();\n        return null;\n    }\n}\n","import {PureComponent} from \"react\";\nimport Konva from 'konva';\nimport image from '../components/fs.webp'\n\nconst raspberryPath = 'M372 232.5l-3.7-6.5c.1-46.4-21.4-65.3-46.5-79.7 7.6-2 15.4-3.6 17.6-13.2 13.1-3.3 15.8-9.4 17.1-15.8 3.4-2.3 14.8-8.7 13.6-19.7 6.4-4.4 10-10.1 8.1-18.1 6.9-7.5 8.7-13.7 5.8-19.4 8.3-10.3 4.6-15.6 1.1-20.9 6.2-11.2.7-23.2-16.6-21.2-6.9-10.1-21.9-7.8-24.2-7.8-2.6-3.2-6-6-16.5-4.7-6.8-6.1-14.4-5-22.3-2.1-9.3-7.3-15.5-1.4-22.6.8C271.6.6 269 5.5 263.5 7.6c-12.3-2.6-16.1 3-22 8.9l-6.9-.1c-18.6 10.8-27.8 32.8-31.1 44.1-3.3-11.3-12.5-33.3-31.1-44.1l-6.9.1c-5.9-5.9-9.7-11.5-22-8.9-5.6-2-8.1-7-19.4-3.4-4.6-1.4-8.9-4.4-13.9-4.3-2.6.1-5.5 1-8.7 3.5-7.9-3-15.5-4-22.3 2.1-10.5-1.3-14 1.4-16.5 4.7-2.3 0-17.3-2.3-24.2 7.8C21.2 16 15.8 28 22 39.2c-3.5 5.4-7.2 10.7 1.1 20.9-2.9 5.7-1.1 11.9 5.8 19.4-1.8 8 1.8 13.7 8.1 18.1-1.2 11 10.2 17.4 13.6 19.7 1.3 6.4 4 12.4 17.1 15.8 2.2 9.5 10 11.2 17.6 13.2-25.1 14.4-46.6 33.3-46.5 79.7l-3.7 6.5c-28.8 17.2-54.7 72.7-14.2 117.7 2.6 14.1 7.1 24.2 11 35.4 5.9 45.2 44.5 66.3 54.6 68.8 14.9 11.2 30.8 21.8 52.2 29.2C159 504.2 181 512 203 512h1c22.1 0 44-7.8 64.2-28.4 21.5-7.4 37.3-18 52.2-29.2 10.2-2.5 48.7-23.6 54.6-68.8 3.9-11.2 8.4-21.3 11-35.4 40.6-45.1 14.7-100.5-14-117.7zm-22.2-8c-1.5 18.7-98.9-65.1-82.1-67.9 45.7-7.5 83.6 19.2 82.1 67.9zm-43 93.1c-24.5 15.8-59.8 5.6-78.8-22.8s-14.6-64.2 9.9-80c24.5-15.8 59.8-5.6 78.8 22.8s14.6 64.2-9.9 80zM238.9 29.3c.8 4.2 1.8 6.8 2.9 7.6 5.4-5.8 9.8-11.7 16.8-17.3 0 3.3-1.7 6.8 2.5 9.4 3.7-5 8.8-9.5 15.5-13.3-3.2 5.6-.6 7.3 1.2 9.6 5.1-4.4 10-8.8 19.4-12.3-2.6 3.1-6.2 6.2-2.4 9.8 5.3-3.3 10.6-6.6 23.1-8.9-2.8 3.1-8.7 6.3-5.1 9.4 6.6-2.5 14-4.4 22.1-5.4-3.9 3.2-7.1 6.3-3.9 8.8 7.1-2.2 16.9-5.1 26.4-2.6l-6 6.1c-.7.8 14.1.6 23.9.8-3.6 5-7.2 9.7-9.3 18.2 1 1 5.8.4 10.4 0-4.7 9.9-12.8 12.3-14.7 16.6 2.9 2.2 6.8 1.6 11.2.1-3.4 6.9-10.4 11.7-16 17.3 1.4 1 3.9 1.6 9.7.9-5.2 5.5-11.4 10.5-18.8 15 1.3 1.5 5.8 1.5 10 1.6-6.7 6.5-15.3 9.9-23.4 14.2 4 2.7 6.9 2.1 10 2.1-5.7 4.7-15.4 7.1-24.4 10 1.7 2.7 3.4 3.4 7.1 4.1-9.5 5.3-23.2 2.9-27 5.6.9 2.7 3.6 4.4 6.7 5.8-15.4.9-57.3-.6-65.4-32.3 15.7-17.3 44.4-37.5 93.7-62.6-38.4 12.8-73 30-102 53.5-34.3-15.9-10.8-55.9 5.8-71.8zm-34.4 114.6c24.2-.3 54.1 17.8 54 34.7-.1 15-21 27.1-53.8 26.9-32.1-.4-53.7-15.2-53.6-29.8 0-11.9 26.2-32.5 53.4-31.8zm-123-12.8c3.7-.7 5.4-1.5 7.1-4.1-9-2.8-18.7-5.3-24.4-10 3.1 0 6 .7 10-2.1-8.1-4.3-16.7-7.7-23.4-14.2 4.2-.1 8.7 0 10-1.6-7.4-4.5-13.6-9.5-18.8-15 5.8.7 8.3.1 9.7-.9-5.6-5.6-12.7-10.4-16-17.3 4.3 1.5 8.3 2 11.2-.1-1.9-4.2-10-6.7-14.7-16.6 4.6.4 9.4 1 10.4 0-2.1-8.5-5.8-13.3-9.3-18.2 9.8-.1 24.6 0 23.9-.8l-6-6.1c9.5-2.5 19.3.4 26.4 2.6 3.2-2.5-.1-5.6-3.9-8.8 8.1 1.1 15.4 2.9 22.1 5.4 3.5-3.1-2.3-6.3-5.1-9.4 12.5 2.3 17.8 5.6 23.1 8.9 3.8-3.6.2-6.7-2.4-9.8 9.4 3.4 14.3 7.9 19.4 12.3 1.7-2.3 4.4-4 1.2-9.6 6.7 3.8 11.8 8.3 15.5 13.3 4.1-2.6 2.5-6.2 2.5-9.4 7 5.6 11.4 11.5 16.8 17.3 1.1-.8 2-3.4 2.9-7.6 16.6 15.9 40.1 55.9 6 71.8-29-23.5-63.6-40.7-102-53.5 49.3 25 78 45.3 93.7 62.6-8 31.8-50 33.2-65.4 32.3 3.1-1.4 5.8-3.2 6.7-5.8-4-2.8-17.6-.4-27.2-5.6zm60.1 24.1c16.8 2.8-80.6 86.5-82.1 67.9-1.5-48.7 36.5-75.5 82.1-67.9zM38.2 342c-23.7-18.8-31.3-73.7 12.6-98.3 26.5-7 9 107.8-12.6 98.3zm91 98.2c-13.3 7.9-45.8 4.7-68.8-27.9-15.5-27.4-13.5-55.2-2.6-63.4 16.3-9.8 41.5 3.4 60.9 25.6 16.9 20 24.6 55.3 10.5 65.7zm-26.4-119.7c-24.5-15.8-28.9-51.6-9.9-80s54.3-38.6 78.8-22.8 28.9 51.6 9.9 80c-19.1 28.4-54.4 38.6-78.8 22.8zM205 496c-29.4 1.2-58.2-23.7-57.8-32.3-.4-12.7 35.8-22.6 59.3-22 23.7-1 55.6 7.5 55.7 18.9.5 11-28.8 35.9-57.2 35.4zm58.9-124.9c.2 29.7-26.2 53.8-58.8 54-32.6.2-59.2-23.8-59.4-53.4v-.6c-.2-29.7 26.2-53.8 58.8-54 32.6-.2 59.2 23.8 59.4 53.4v.6zm82.2 42.7c-25.3 34.6-59.6 35.9-72.3 26.3-13.3-12.4-3.2-50.9 15.1-72 20.9-23.3 43.3-38.5 58.9-26.6 10.5 10.3 16.7 49.1-1.7 72.3zm22.9-73.2c-21.5 9.4-39-105.3-12.6-98.3 43.9 24.7 36.3 79.6 12.6 98.3z';\n\nexport class CanvasOfShowOnMap extends PureComponent{\n    constructor(props){\n        super(props);\n        this.state = {\n            stage: null,\n            layer: null,\n            imageURL: null,\n            data: null,\n            count: null\n        }\n    }\n\n    componentDidMount() {\n        const stage = new Konva.Stage({\n            width: window.innerWidth,\n            height: window.innerHeight,\n            container: '#containerForStage',\n            visible: true\n        });\n        const layer = new Konva.Layer({});\n        stage.add(layer);\n        const data = JSON.parse(document.getElementById(\"containerForStage\").dataset.value);\n        const count = parseInt(document.getElementById(\"containerForStage\").dataset.count);\n        const imageURL = document.getElementById(\"containerForStage\").dataset.imageurl;\n        this.setState({ layer, data, count, imageURL });\n        setInterval(() => {\n            const data = JSON.parse(document.getElementById(\"containerForStage\").dataset.value);\n            const count = parseInt(document.getElementById(\"containerForStage\").dataset.count);\n            const imageURL = document.getElementById(\"containerForStage\").dataset.imageurl;\n            this.setState({ layer, data, count, imageURL }, () => {\n                \n            });\n        },1000)\n    }\n\n    drawShapes = async () => {\n        const { layer, count, data, imageURL } = this.state;\n        if(layer!==null){\n            await layer.destroyChildren();\n            if(imageURL && imageURL!==\"\") {\n                await Konva.Image.fromURL(imageURL, async function (image) {\n                    await layer.add(image);\n                    image.zIndex(0);\n                });\n            }\n            for(let i = 0; i < count/5; i++){\n                for(let j = 0; j < 5; j++) {\n                    const lenOfId = data.filter(d => d.deviceID === i*count+j).length;\n                    layer.add(new Konva.Path({\n                        id: i*count+j,\n                        x: 100 * i + 250,\n                        y: 100 * j + 150,\n                        data: raspberryPath,\n                        fill: 'purple',\n                        scaleX: 0.05,\n                        scaleY: 0.05\n                    }));\n                    layer.add(new Konva.Ring({\n                        id:'circle',\n                        x: 100 * i + 260,\n                        y: 100 * j + 160,\n                        outerRadius: 0,\n                        innerRadius: lenOfId,\n                        fill: lenOfId>6 ? 'purple' : 'green',\n                        opacity: lenOfId>6 ? 0.5 : 1\n                    }));\n                }\n            }\n            layer.draw();\n        }\n    };\n\n\n    render(){\n        console.log(\"rendering....\", this.state);\n        // console.log(\"rendering....\", document.getElementById(\"containerForStage\").dataset);\n        this.drawShapes();\n        return null;\n    }\n}\n","import React, { PureComponent } from 'react';\nimport ReactDOM from \"react-dom\";\nimport {CanvasOfShowOnMap} from \"./components\";\n\nclass ShowOnMap extends PureComponent {\n\n\n    render() {\n        ReactDOM.render(\n            <CanvasOfShowOnMap />, document.getElementById('containerForStage'));\n        return null;\n    }\n}\n\nexport default ShowOnMap;\n","import React, { PureComponent } from 'react';\nimport { Tools } from \"./components\";\nimport { Canvas } from \"./components\";\nimport ReactDOM from \"react-dom\";\n\nclass App extends PureComponent {\n    constructor(props){\n        super(props);\n        this.state={\n            selectedTool:null,\n            isReadyToSave:false,\n            shapes:[],\n            image: null,\n            showImage:true\n        }\n    }\n\n    componentDidMount() {\n        this.setState({\n            selectedTool: null,\n            isReadyToSave:false,\n        });\n    }\n\n    isReadyToSaveHaveHandler = (state) => {\n        this.setState({isReadyToSave: state});\n    };\n\n    selectTool = (e, { name }) => {\n        this.setState({selectedTool: name});\n    };\n\n    changeImage = image => {\n        return new Promise(resolve => {\n            this.setState({image});\n            resolve(image);\n        });\n    };\n\n    shape = {};\n    changeShape = (shape) => {\n        console.log(\"shape\", shape)\n        this.shape = shape;\n    };\n\n    saveShape = () => {\n        const { isReadyToSave, shapes, selectedTool } = this.state;\n        if(isReadyToSave){\n            this.setState({shapes:[...shapes, {type:selectedTool, shape:this.shape}]});\n        }else{\n            alert(\"not ready to save\");\n        }\n    };\n\n    showImageHandler = () => {\n        const { showImage } = this.state;\n        this.setState({showImage:!showImage});\n    };\n\n    render() {\n        const { selectedTool, shapes, image, showImage } = this.state;\n        ReactDOM.render(\n            <Tools\n                showImageHandler={this.showImageHandler}\n                selectTool={this.selectTool}\n                saveShape={this.saveShape}\n                selectedTool={selectedTool}\n                changeImage={this.changeImage}\n            />, document.getElementById('tools'));\n        ReactDOM.render(\n            <Canvas\n                isReadyToSaveHaveHandler={this.isReadyToSaveHaveHandler}\n                changeShape={this.changeShape}\n                selectedTool={selectedTool}\n                shapes={shapes}\n                image={image}\n                showImage={showImage}\n            />, document.getElementById('containerForStage'));\n        return null;\n    }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport ShowOnMap from './ShowOnMap';\nimport * as serviceWorker from './serviceWorker';\nimport 'semantic-ui-css/semantic.min.css'\n\nReactDOM.render(<ShowOnMap />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}